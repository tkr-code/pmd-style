{% extends 'admin/base.html.twig' %}

{% import "macros/table.html.twig" as table %}
{% import "macros/head.html.twig" as head %}
{% import "macros/foot.html.twig" as foot %}
{% import "macros/breadcrumb.html.twig" as utils %}
{% import "macros/alertes.html.twig" as alerte %}
{% import "macros/button.html.twig" as btn %}
{% import "macros/link.html.twig" as link %}
{% import "macros/dataTable.html.twig" as dataTable %}

{% block title %}ContractantInvestissement index
{% endblock %}

{% block head %}
	{{ dataTable.css() }}
{% endblock %}

{% block foot %}
	{{ dataTable.js() }}
{% endblock %}

{% block body %}

	{% for item in app.flashes('success') %}
		{{alerte.alert(item,'success')}}
	{% endfor %}

	<div class="row mb-3">
		<div class="col-lg-12 col-md-12 col-12">
			<div class="container-fluid">
				<div class="row mb-2">
					{{link.add(path('admin_gestion_contractant_investissement_new'))}}
				</div>
			</div>

			<div class="card card-outline card-primary">
				<div class="card-header">
					Tous vos partenaires d'affaires sont list√©s ici
				</div>
				<div class="card-body">
					<table class="table" id="table-2">
						<thead>
							<tr>
								<th>Partenaire</th>
								<th>email</th>
								<th>Nb investissement</th>
								<th>Ville</th>
								<th>Pays</th>
								<th>CodePostal</th>
								<th>actions</th>
							</tr>
						</thead>
						<tbody>
							{% for contractant_investissement in contractant_investissements %}
								<tr>
									<td>{{ contractant_investissement.personneGestion.getFullName }}</td>
									<td>{{ contractant_investissement.personneGestion.email }}</td>
									<td>
										vous avez <b class="text-danger">{{ contractant_investissement.investissements|length }}</b>&nbsp; investissement(s)
										<b class="text-dark">|</b>&nbsp;ajoutez {{link.iconAdd(path('admin_gestion_investissement_new',{'id':contractant_investissement.id}))}} <b class="text-dark">|</b>
										 &nbsp;visualiser les {{link.show(path('admin_gestion_investissement_index',{'id':contractant_investissement.id}))}}
									</td>
									<td>{{ contractant_investissement.ville }}</td>
									<td>{{ contractant_investissement.pays }}</td>
									<td>{{ contractant_investissement.codePostal }}</td>
									<td>
										{{link.show(path('admin_gestion_contractant_investissement_show', {'id': contractant_investissement.id}))}}
										{{link.iconEdit(path('admin_gestion_contractant_investissement_edit', {'id': contractant_investissement.id}))}}
									</td>
								</tr>
							{% else %}
								<tr>
									<td colspan="5">no records found</td>
								</tr>
							{% endfor %}
						</tbody>
					</table>
				</div>
				<div class="card-footer"></div>
			</div>
		</div>
	</div>


{% endblock %}

{% block javascripts %}
{{ dataTable.script('#table-1') }}
{{ dataTable.script('#table-2') }}
{{ dataTable.script('#table-3') }}
{% endblock %}
